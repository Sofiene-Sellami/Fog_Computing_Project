{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\gg\\\\Desktop\\\\3 eme\\\\FOG\\\\fog-dashboard\\\\src\\\\App.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from \"react\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function App() {\n  _s();\n  const [image, setImage] = useState(null);\n  const [result, setResult] = useState(\"Aucun résultat de détection...\");\n  const [nodes, setNodes] = useState([]);\n\n  // Poll du master pour récupérer le statut des nodes fog\n  useEffect(() => {\n    const interval = setInterval(async () => {\n      try {\n        const res = await fetch(\"http://192.168.137.1:8000/nodes\");\n        const data = await res.json();\n        setNodes(data.nodes || []);\n      } catch (err) {\n        console.error(\"Erreur lors de la récupération des nodes fog :\", err);\n      }\n    }, 500); // rafraîchissement toutes les 500ms\n\n    return () => clearInterval(interval);\n  }, []);\n  const getColor = status => {\n    if (status === 1) return \"#4ade80\"; // vert = available\n    if (status === 0) return \"#f87171\"; // rouge = occupé mais connecté\n    return \"#60a5fa\"; // bleu = non connecté ou unreachable\n  };\n  const handleUpload = async e => {\n    const file = e.target.files[0];\n    if (!file) return;\n\n    // Afficher l’image dans le premier carré\n    setImage(URL.createObjectURL(file));\n    setResult(\"Envoi de l'image vers un node fog...\");\n    const formData = new FormData();\n    formData.append(\"image\", file);\n    formData.append(\"frame_id\", 1); // tu peux envoyer un vrai frame_id si besoin\n\n    try {\n      var _fogData$detections;\n      // Envoyer au fog node (dans ton cas le slave s’enregistre mDNS, l’orchestrator choisit la vraie IP)\n      const fogRes = await fetch(\"http://192.168.137.1:6000/process\", {\n        method: \"POST\",\n        body: formData\n      });\n      const fogData = await fogRes.json();\n      setResult(`Detections : ${((_fogData$detections = fogData.detections) === null || _fogData$detections === void 0 ? void 0 : _fogData$detections.length) || 0}`);\n    } catch (err) {\n      console.error(\"Erreur lors de l'appel au node fog :\", err);\n      setResult(\"Le node fog ne répond pas...\");\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: styles.container,\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      style: styles.left,\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        style: styles.imageBox,\n        children: image ? /*#__PURE__*/_jsxDEV(\"img\", {\n          src: image,\n          alt: \"d\\xE9tection fog\",\n          style: styles.image\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 61,\n          columnNumber: 13\n        }, this) : /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"Charge une image pour lancer la d\\xE9tection\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 63,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: styles.resultBox,\n        children: result\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"file\",\n        onChange: handleUpload,\n        style: styles.fileInput\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: styles.right,\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        style: styles.header,\n        children: \"Nodes Status\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 9\n      }, this), [\"FogNode1\", \"FogNode2\", \"FogNode3\"].map(name => {\n        const node = nodes.find(n => n.name === name);\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            ...styles.node,\n            backgroundColor: getColor(node === null || node === void 0 ? void 0 : node.available)\n          },\n          children: name\n        }, name, false, {\n          fileName: _jsxFileName,\n          lineNumber: 79,\n          columnNumber: 13\n        }, this);\n      })]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 56,\n    columnNumber: 5\n  }, this);\n}\n_s(App, \"kGvzZoeB3MkJvrzRBdXIpex8jsQ=\");\n_c = App;\nconst styles = {\n  container: {\n    display: \"flex\",\n    width: \"100vw\",\n    height: \"100vh\",\n    justifyContent: \"center\",\n    alignItems: \"center\",\n    background: \"linear-gradient(135deg, #fbc2eb, #fde047)\"\n  },\n  left: {\n    display: \"flex\",\n    flexDirection: \"column\",\n    marginRight: \"50px\",\n    gap: \"20px\",\n    alignItems: \"center\"\n  },\n  right: {\n    display: \"flex\",\n    flexDirection: \"column\",\n    gap: \"15px\",\n    alignItems: \"center\"\n  },\n  header: {\n    width: \"220px\",\n    padding: \"12px\",\n    textAlign: \"center\",\n    fontWeight: \"bold\",\n    fontSize: \"20px\",\n    borderRadius: \"10px\",\n    background: \"#a3e635\",\n    color: \"white\"\n  },\n  imageBox: {\n    width: \"420px\",\n    height: \"320px\",\n    borderRadius: \"15px\",\n    background: \"#d8b4fe\",\n    display: \"flex\",\n    justifyContent: \"center\",\n    alignItems: \"center\",\n    border: \"3px dashed white\",\n    overflow: \"hidden\"\n  },\n  image: {\n    width: \"100%\",\n    height: \"100%\",\n    objectFit: \"cover\",\n    borderRadius: \"15px\"\n  },\n  resultBox: {\n    width: \"420px\",\n    padding: \"15px\",\n    borderRadius: \"10px\",\n    background: \"#c084fc\",\n    textAlign: \"center\",\n    fontSize: \"18px\",\n    fontWeight: \"bold\",\n    color: \"white\"\n  },\n  fileInput: {\n    padding: \"10px\",\n    fontSize: \"16px\"\n  },\n  node: {\n    width: \"200px\",\n    padding: \"12px\",\n    borderRadius: \"10px\",\n    fontWeight: \"bold\",\n    color: \"white\",\n    textAlign: \"center\",\n    fontSize: \"18px\"\n  }\n};\nvar _c;\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["React","useState","useEffect","jsxDEV","_jsxDEV","App","_s","image","setImage","result","setResult","nodes","setNodes","interval","setInterval","res","fetch","data","json","err","console","error","clearInterval","getColor","status","handleUpload","e","file","target","files","URL","createObjectURL","formData","FormData","append","_fogData$detections","fogRes","method","body","fogData","detections","length","style","styles","container","children","left","imageBox","src","alt","fileName","_jsxFileName","lineNumber","columnNumber","resultBox","type","onChange","fileInput","right","header","map","name","node","find","n","backgroundColor","available","_c","display","width","height","justifyContent","alignItems","background","flexDirection","marginRight","gap","padding","textAlign","fontWeight","fontSize","borderRadius","color","border","overflow","objectFit","$RefreshReg$"],"sources":["C:/Users/gg/Desktop/3 eme/FOG/fog-dashboard/src/App.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\n\nexport default function App() {\n  const [image, setImage] = useState(null);\n  const [result, setResult] = useState(\"Aucun résultat de détection...\");\n  const [nodes, setNodes] = useState([]);\n\n  // Poll du master pour récupérer le statut des nodes fog\n  useEffect(() => {\n    const interval = setInterval(async () => {\n      try {\n        const res = await fetch(\"http://192.168.137.1:8000/nodes\");\n        const data = await res.json();\n        setNodes(data.nodes || []);\n      } catch (err) {\n        console.error(\"Erreur lors de la récupération des nodes fog :\", err);\n      }\n    }, 500); // rafraîchissement toutes les 500ms\n\n    return () => clearInterval(interval);\n  }, []);\n\n  const getColor = (status) => {\n    if (status === 1) return \"#4ade80\"; // vert = available\n    if (status === 0) return \"#f87171\"; // rouge = occupé mais connecté\n    return \"#60a5fa\"; // bleu = non connecté ou unreachable\n  };\n\n  const handleUpload = async (e) => {\n    const file = e.target.files[0];\n    if (!file) return;\n\n    // Afficher l’image dans le premier carré\n    setImage(URL.createObjectURL(file));\n    setResult(\"Envoi de l'image vers un node fog...\");\n\n    const formData = new FormData();\n    formData.append(\"image\", file);\n    formData.append(\"frame_id\", 1); // tu peux envoyer un vrai frame_id si besoin\n\n    try {\n      // Envoyer au fog node (dans ton cas le slave s’enregistre mDNS, l’orchestrator choisit la vraie IP)\n      const fogRes = await fetch(\"http://192.168.137.1:6000/process\", {\n        method: \"POST\",\n        body: formData,\n      });\n      const fogData = await fogRes.json();\n      setResult(`Detections : ${fogData.detections?.length || 0}`);\n    } catch (err) {\n      console.error(\"Erreur lors de l'appel au node fog :\", err);\n      setResult(\"Le node fog ne répond pas...\");\n    }\n  };\n\n  return (\n    <div style={styles.container}>\n      {/* SECTION GAUCHE */}\n      <div style={styles.left}>\n        <div style={styles.imageBox}>\n          {image ? (\n            <img src={image} alt=\"détection fog\" style={styles.image} />\n          ) : (\n            <p>Charge une image pour lancer la détection</p>\n          )}\n        </div>\n\n        <div style={styles.resultBox}>{result}</div>\n\n        <input type=\"file\" onChange={handleUpload} style={styles.fileInput} />\n      </div>\n\n      {/* SECTION DROITE */}\n      <div style={styles.right}>\n        <div style={styles.header}>Nodes Status</div>\n\n        {[\"FogNode1\", \"FogNode2\", \"FogNode3\"].map((name) => {\n          const node = nodes.find((n) => n.name === name);\n          return (\n            <div\n              key={name}\n              style={{ ...styles.node, backgroundColor: getColor(node?.available) }}\n            >\n              {name}\n            </div>\n          );\n        })}\n      </div>\n    </div>\n  );\n}\n\nconst styles = {\n  container: {\n    display: \"flex\",\n    width: \"100vw\",\n    height: \"100vh\",\n    justifyContent: \"center\",\n    alignItems: \"center\",\n    background: \"linear-gradient(135deg, #fbc2eb, #fde047)\",\n  },\n  left: {\n    display: \"flex\",\n    flexDirection: \"column\",\n    marginRight: \"50px\",\n    gap: \"20px\",\n    alignItems: \"center\",\n  },\n  right: {\n    display: \"flex\",\n    flexDirection: \"column\",\n    gap: \"15px\",\n    alignItems: \"center\",\n  },\n  header: {\n    width: \"220px\",\n    padding: \"12px\",\n    textAlign: \"center\",\n    fontWeight: \"bold\",\n    fontSize: \"20px\",\n    borderRadius: \"10px\",\n    background: \"#a3e635\",\n    color: \"white\",\n  },\n  imageBox: {\n    width: \"420px\",\n    height: \"320px\",\n    borderRadius: \"15px\",\n    background: \"#d8b4fe\",\n    display: \"flex\",\n    justifyContent: \"center\",\n    alignItems: \"center\",\n    border: \"3px dashed white\",\n    overflow: \"hidden\",\n  },\n  image: {\n    width: \"100%\",\n    height: \"100%\",\n    objectFit: \"cover\",\n    borderRadius: \"15px\",\n  },\n  resultBox: {\n    width: \"420px\",\n    padding: \"15px\",\n    borderRadius: \"10px\",\n    background: \"#c084fc\",\n    textAlign: \"center\",\n    fontSize: \"18px\",\n    fontWeight: \"bold\",\n    color: \"white\",\n  },\n  fileInput: {\n    padding: \"10px\",\n    fontSize: \"16px\",\n  },\n  node: {\n    width: \"200px\",\n    padding: \"12px\",\n    borderRadius: \"10px\",\n    fontWeight: \"bold\",\n    color: \"white\",\n    textAlign: \"center\",\n    fontSize: \"18px\",\n  },\n};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}